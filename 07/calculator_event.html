<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            font-family: Arial, Helvetica, sans-serif;
            max-width: 400px;
            margin: 50px auto; /* ìƒí•˜ 50px, ì¢Œìš° ìë™ìœ¼ë¡œ ì¤‘ì•™ì •ë ¬*/
            padding: 2px;   
            background-color: #f0f0f0;
        }   
        .calculate{
            background: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0,1);
        }
        h1{
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        #display{
            width: 100%;
            height: 50px;
            font-size: 24px;
            text-align: right;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            margin-bottom: 15px;
            background-color: #f9f9f9;
            box-sizing: border-box;     /* íŒ¨ë”©ê³¼ í…Œë‘ë¦¬ë¥¼ ë„ˆë¹„ì— í¬í•¨ */
        }
        /* ë²„íŠ¼ ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .buttons{
            display: grid;
            grid-template-columns: repeat(4, 1fr);  /* 4ê°œ ì—´, ë™ì¼í•œ ë„ˆë¹„ */
            grid-template-rows: repeat(5, 50px); /* ëª…ì‹œì ìœ¼ë¡œ 5í–‰ ì •ì˜, ê° 50PX ë†’ì´*/
            gap: 10px;
        }
        /* ëª¨ë“  ë²„íŠ¼ì˜ ê³µë™ ìŠ¤íƒ€ì¼*/
        button{
            font-size: 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .number{
            background-color: #e8e8e8;
            color: #333;
        }
        .number:hover{
            background-color: #d0d0d0;
        }
        .operator{
            background-color: #007bff;
            color: white;
        }
        .operator:hover{
            background-color: #0056b3;
        }
        .clear{
            background-color: #dc3545;
            color: white;
        }
        .clear:hover{
            background-color: #28a745;
        }
        .equals{
            background-color: #18a745;
            color: white;
            grid-row: span 2;   /* ì„¸ë¡œë¡œ 2í–‰ì— ê±¸ì³ í‘œì‹œ */
        }
        .equals:hover{
            background-color: #218838;
        }
        .zero{
            grid-column: span 2;    /*ê°€ë¡œë¡œ 2ì—´ì— ê±¸ì³ í‘œì‹œ */
        }
    </style>
</head>
<body>
    <div class="calculate">
        <h1> ğŸ§®ê°„ë‹¨í•œ ê³„ì‚°ê¸°</h1>
        <input type="text" id="display" readonly>

        <div class="buttons">
            <!--ì²«ë²ˆì§¸ ì¤„: -->
            <button class="clear" onclick="clearDisplay()">C</button>
            <button class="clear" onclick="backspace()">ğŸ”™</button>
            <button class="operator" onclick="appendToDisplay('/')">/</button>
            <button class="operator" onclick="appendToDisplay('*')">*</button>

            <!--ë‘ë²ˆì§¸ ì¤„: -->
            <button class="number" onclick="appendToDisplay('7')">7</button>
            <button class="number" onclick="appendToDisplay('8')">8</button>
            <button class="number" onclick="appendToDisplay('9')">9</button>
            <button class="operator" onclick="appendToDisplay('-')">-</button>

            <!--ì„¸ë²ˆì§¸ ì¤„: -->
            <button class="number" onclick="appendToDisplay('4')">4</button>
            <button class="number" onclick="appendToDisplay('5')">5</button>
            <button class="number" onclick="appendToDisplay('6')">6</button>
            <button class="operator" onclick="appendToDisplay('7')">+</button>

            <!--ë„¤ë²ˆì§¸ ì¤„: -->
            <button class="number" onclick="appendToDisplay('1')">1</button>
            <button class="number" onclick="appendToDisplay('2')">2</button>
            <button class="number" onclick="appendToDisplay('3')">3</button>
            <button class="equals" onclick="calculate()">=</button>

            <!--ë‹¤ì„¯ë²ˆì§¸ ì¤„: -->
            <button class="number zero" onclick="appendToDisplay('0')">0</button>
            <button class="number" onclick="appendToDisplay('.')">.</button>

        </div>
    </div>
    <script>
        //ì „ì—­ë³€ìˆ˜
        let currentInput = '';  //ì‚¬ìš©ìê°€ ì…ë ¥í•œ ìˆ«ì, ì—°ì‚°ìë“¤
        //í™”ë©´ í‘œì‹œ í•¨ìˆ˜
        function appendToDisplay(value){
            const display = document.getElementById("display")
            //í˜„ì¬ ì…ë ¥ê°’ì— ìƒˆë¡œìš´ ê°’ì„ ì¶”ê°€
            currentInput += value;
            //í™”ë©´ì— ì—…ë°ì´íŠ¸ëœ ê³„ì‚°ì‹ í‘œì‹œ
            display.value = currentInput;
            console.log('ì…ë ¥ë¨:', value, 'í˜„ì¬ì‹:', currentInput)
        }
        //í™”ë©´ì„ ì™„ì „íˆ ì§€ìš°ëŠ” í•¨ìˆ˜(cë²„íŠ¼)
        function clearDisplay(){
            const display = document.getElementById("display")
            //ëª¨ë“  ê°’ ì´ˆê¸°í™”
            currentInput = '';  // ì…ë ¥ ë³€ìˆ˜ ì§€ìš°ê¸°
            display.value = ''; // í™”ë©´ ë¹„ìš°ê¸°
            console.log('ê³„ì‚°ê¸°ê°€ ì´ˆê¸°í™” ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
        //ë§ˆì§€ë§‰ ì…ë ¥ì„ ì§€ìš°ëŠ” í•¨ìˆ˜
        function backspace(){
            //DOMì—ì„œ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
            const display = document.getElementById("display")
            // slice() ë§ˆì§€ë§‰ ë¬¸ì ì œì™¸í•˜ê³  ìë¥´ê¸°
            currentInput= currentInput.slice(0, -1);  //í˜„ì¬ ì…ë ¥ê°’ì—ì„œ ë§ˆì§€ë§‰ ë¬¸ì ì œê±°
            //í™”ë©´ ì—…ë°ì´íŠ¸
            display.value = currentInput; 
            //ì½˜ì†”ì— ë°±ìŠ¤í˜ì´ìŠ¤ ì •ë³´ ì¶œë ¥
            console.log('ë°±ìŠ¤í˜ì´ìŠ¤, í˜„ì¬ì‹ : ', currentInput)
        }
        //ê³„ì‚°ì„ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ (=ë²„íŠ¼)
        function calculate(){
            const display = document.getElementById("display")
            try{
                //ì…ë ¥ëœ ì‹ì´ ë¹„ì–´ìˆìœ¼ë©´ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ
                if(currentInput === ''){
                return; //í•¨ìˆ˜ ì¢…ë£Œ
                }
                //í˜„ì¬ ì…ë ¥ê°’ì„ ê³„ì‚°
                let result = eval(currentInput);
                //ê²°ê³¼ê°€ ì†Œìˆ˜ì  8ìë¦¬ê¹Œì§€ë§Œ í‘œì‹œ
                result = Math.round(result * 100000000) / 100000000;

                //ê²°ê³¼ë¥¼ í™”ë©´ì— í‘œì‹œ
                display.value = result;
                //ë‹¤ìŒ ê³„ì‚°ì„ ìœ„í•´ ê²°ê³¼ë¥¼ ìƒˆë¡œìš´ ì‹œì‘ì ìœ¼ë¡œ ì„¤ì •
               currentInput =  result.toString();
               //ì½˜ì†”ì— ê³„ì‚° ì™„ë£Œ ì •ë³´
               console.log('ê³„ì‚° ì™„ë£Œ : ', result);
            }catch(error){
                // ê³„ì‚° ì˜¤ë¥˜ ë°œìƒ ì‹œ (ì˜ëª»ëœ ìˆ˜ì‹ ë“±)
                display.value = 'Error';    //ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
                currentInput = '';  //ì…ë ¥ ë³€ìˆ˜ ì´ˆê¸°í™”
                console.log('ê³„ì‚° ì˜¤ë¥˜', error.message);
                // 2ì´ˆ í›„ í™”ë©´ ìë™ ì´ˆê¸°í™”
                setTimeout(clearDisplay, 2000);
            }
        }
        //í‚¤ë³´ë“œ ì…ë ¥ ì´ë²¤íŠ¸ ì²˜ë¦¬
        //ì‚¬ìš©ìê°€ ë²„íŠ¼ í´ë¦­í•˜ì§€ ì•Šì•„ë„ í‚¤ë³´ë“œ ìˆ«ì, ì—°ì‚°ì, ì—”í„° ë“± ì§ì ‘ ì…ë ¥í•´ì„œ ì´ë²¤íŠ¸ ì²˜ë¦¬
        document.addEventListener('keydown', function(event){
            const key = event.key;  //ëˆŒë¦° í‚¤ ê°’ ê°€ì ¸ì˜¤ê¸°
            //ìˆ«ì í‚¤ ì²˜ë¦¬(0~9)
            if(key >= '0' && key <='9'){
                appendToDisplay(key);   //ìˆ«ìë¥¼ í™”ë©´ì— ì¶”ê°€
            }
            //ì—°ì‚°ì í‚¤ ì²˜ë¦¬(+, -, *, /)
            else if(key === '+' || key ==='-' || key ==='*' || key === '/'){
                appendToDisplay(key);   //ì—°ì‚°ìë¥¼ í™”ë©´ì— ì¶”ê°€
            }
            //ì†Œìˆ˜ì  ì²˜ë¦¬
            else if(key === '.'){
                appendToDisplay(key);   //ì†Œìˆ˜ì ì„ í™”ë©´ì— ì¶”ê°€
            }
            //Enter í‚¤ë¡œ ê³„ì‚° ì²˜ë¦¬
            else if(key === 'Enter'){
                event.preventDefault(); //ê¸°ë³¸ ë™ì‘ ë°©ì§€
                calculate();    //ê³„ì‚° í•¨ìˆ˜ í˜¸ì¶œ
            }
            //Escape ì²˜ë¦¬
            else if(key === 'Escape'){
                clearDisplay(); //í™”ë©´ ì§€ìš°ê¸° í•¨ìˆ˜ í˜¸ì¶œ
            }
            //BackSpace í‚¤ë¡œ ê³„ì‚° ì²˜ë¦¬
            else if(key === 'Backspace'){
                event.preventDefault(); //ê¸°ë³¸ ë™ì‘ ë°©ì§€
                backspace();    //ë°±ìŠ¤í˜ì´ìŠ¤ í•¨ìˆ˜ í˜¸ì¶œ
            }
            console.log('í‚¤ë³´ë“œ ì…ë ¥: ', key);
        })
    </script>
</body>
</html>